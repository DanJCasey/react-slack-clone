{"version":3,"sources":["components/UserList/index.module.css","components/MessageList/index.module.css","components/Message/index.module.css","components/FileInput/index.module.css","components/UserHeader/index.module.css","components/CreateMessageForm/index.module.css","components/RoomList/index.module.css","components/RoomHeader/index.module.css","components/CreateRoomForm/index.module.css","components/WelcomeScreen/index.module.css","components/JoinRoomScreen/index.module.css","components/TypingIndicator/index.module.css","components/UserHeader/index.js","components/UserList/index.js","components/Message/index.js","components/MessageList/index.js","components/TypingIndicator/index.js","components/FileInput/index.js","components/CreateMessageForm/index.js","components/RoomList/index.js","components/RoomHeader/index.js","components/CreateRoomForm/index.js","components/WelcomeScreen/index.js","components/JoinRoomScreen/index.js","chatkit.js","index.js"],"names":["module","exports","component","hint","online","empty","container","pulse","dots","ball-beat","UserHeader","_ref","_ref$user","user","react_default","a","createElement","className","style","src","avatarURL","alt","name","id","concat","UserList","room","createConvo","current","removeUser","users","map","key","presence","state","onClick","e","order","length","Attachment","_React$Component","Object","inherits","_super","_createSuper","classCallCheck","this","apply","arguments","createClass","value","props","link","setState","image","controls","video","audio","file","href","download","type","React","Component","Message","message","sender","string","createdAt","date","Date","minutes","getMinutes","getHours","Linkify_default","properties","target","text","attachment","Message_Attachment","emptyList","role","aria-label","MessageList","_ref$messages","messages","keys","reverse","k","x","TypingIndicator","_ref$typing","typing","slice","join","FileInput","_ref$state","xlinkHref","onChange","files","sendMessage","roomId","replace","CreateMessageForm","_ref$state$user","_ref$state$room","_ref$state$message","runCommand","actions","onSubmit","preventDefault","trim","startsWith","placeholder","onInput","isTypingIn","FileInput_FileInput","unreads","undefined","read","readCursor","filter","position","RoomList","_ref$rooms","rooms","messageKeys","latestMessage","pop","firstUser","find","unreadMessages","lastMessage","parseInt","priority","unreadCount","disabled","joinRoom","match","isPrivate","RoomHeader","sidebarOpen","userListOpen","_ref$actions","setSidebar","setUserList","CreateRoomForm","submit","private","elements","checked","required","WelcomeScreen","viewBox","d","JoinRoomScreen","instanceLocator","url","token","src_chatkit","_ref2","Chatkit","ChatManager","tokenProvider","TokenProvider","userId","connect","onUserStartedTyping","isTyping","onUserStoppedTyping","notTyping","onAddedToRoom","subscribeToRoom","onRemovedFromRoom","removeRoom","onPresenceChanged","setUserPresence","then","Promise","all","hooks","onMessage","addMessage","setUser","catch","error","console","log","View","src_createSuper","_this","_len","_args","Array","_key","call","window","innerWidth","setRoom","scrollToEnd","setCursor","roomSubscriptions","createRoom","options","exists","addUserIds","addUserToRoom","_ref$roomId","removeUserFromRoom","_ref2$roomId","leaveRoom","setReadCursor","forceUpdate","payload","messageId","prevState","objectSpread","defineProperty","showNotification","command","commands","invite","_ref3","slicedToArray","remove","_ref5","leave","_ref7","split","args","exec","setTimeout","elem","document","querySelector","scrollTop","senderId","visibilityState","Notification","body","icon","addEventListener","focus","_this2","requestPermission","existingUser","JSON","parse","fetch","method","stringify","code","authCode","res","json","version","localStorage","setItem","history","replaceState","location","pathname","_this$state","_this$actions","data-open","UserHeader_UserHeader","RoomList_RoomList","CreateRoomForm_CreateRoomForm","RoomHeader_RoomHeader","MessageList_MessageList","TypingIndicator_TypingIndicator","CreateMessageForm_CreateMessageForm","UserList_UserList","JoinRoomScreen_JoinRoomScreen","WelcomeScreen_WelcomeScreen","getItem","clear","redirect","URLSearchParams","search","get","ReactDOM","render","src_View"],"mappings":"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","file":"static/js/main.47183b5d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserList_component__3GZEl\",\"hint\":\"UserList_hint__3yHVY\",\"online\":\"UserList_online__1rVDK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"MessageList_component__RRQtg\",\"empty\":\"MessageList_empty__3jmJH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"Message_component__2AL7A\",\"online\":\"Message_online__1JFDJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FileInput_container___cTTh\",\"component\":\"FileInput_component__1yO-6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserHeader_component__3D56q\",\"pulse\":\"UserHeader_pulse__1oLd-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateMessageForm_component__x3Q4y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomList_component__2GFbC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomHeader_component__hhikX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateRoomForm_component__1CypN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"WelcomeScreen_component__2Ivt5\",\"pulse\":\"WelcomeScreen_pulse__YJGy0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"JoinRoomScreen_component__TSpRL\",\"pulse\":\"JoinRoomScreen_pulse__1oJRx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"TypingIndicator_component__3H9UA\",\"dots\":\"TypingIndicator_dots__3LGVD\",\"ball-beat\":\"TypingIndicator_ball-beat__lC0tN\"};","import React from 'react'\nimport style from './index.module.css'\n\nconst placeholder =\n  'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n\nexport const UserHeader = ({ user = {} }) => (\n  <header className={style.component}>\n    <img src={user.avatarURL || placeholder} alt={user.name} />\n    <div>\n      <h3>{user.name}</h3>\n      <h5>{user.id && `@${user.id}`}</h5>\n    </div>\n  </header>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const UserList = ({ room, current, createConvo, removeUser }) => (\n  <ul className={style.component}>\n    {room.users.map(user => (\n      <li\n        key={user.id}\n        className={user.presence.state === 'online' ? style.online : null}\n        onClick={e => createConvo({ user })}\n        style={{ order: user.presence.state === 'online' && -1 }}\n      >\n        <img src={user.avatarURL} alt={user.name} />\n        <p>{user.name}</p>\n      </li>\n    ))}\n    {\n      room.users.length < 5 ? (\n        <li className={style.hint} >\n          <div>\n            Type <span>/invite &lt;username&gt;</span> to invite\n        </div>\n        </li>\n      ) : null\n    }\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\nimport Linkify from 'react-linkify'\n\nconst time = string => {\n  const date = new Date(string)\n  const minutes = date.getMinutes()\n  return `${date.getHours()}:${minutes < 10 ? '0' + minutes : minutes}`\n}\n\nclass Attachment extends React.Component {\n  componentDidMount() {\n    if (this.props.link) this.setState({ src: this.props.link });\n  }\n  render() {\n    return this.state\n      ? {\n          image: (\n            <img controls={true} src={this.state.src} alt={this.state.name} />\n          ),\n          video: <video controls={true} src={this.state.src} />,\n          audio: <audio controls={true} src={this.state.src} />,\n          file: (\n            <a href={this.state.src} download>\n              Download File\n            </a>\n          ),\n        }[this.props.type]\n      : null\n  }\n}\n\nexport const Message = ({ user, createConvo }) => message =>\n  message.sender ? (\n    <li key={message.id} className={style.component}>\n      <img\n        onClick={e => createConvo({ user: message.sender })}\n        src={message.sender.avatarURL}\n        alt={message.sender.name}\n      />\n      <div>\n        <span\n          className={\n            message.sender.id === user.id ||\n            (message.sender.presence &&\n              message.sender.presence.state === 'online')\n              ? style.online\n              : null\n          }\n        >{`${message.sender.name} | ${time(message.createdAt)}`}</span>\n        <p>\n          <Linkify properties={{ target: '_blank' }}>{message.text}</Linkify>\n        </p>\n        {message.attachment ? (\n          <Attachment\n            user={user}\n            link={message.attachment.link}\n            type={message.attachment.type}\n          />\n        ) : null}\n      </div>\n    </li>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { Message } from '../Message'\n\nconst emptyList = (\n  <div className={style.empty}>\n    <span role=\"img\" aria-label=\"post\">\n      📝\n    </span>\n    <h2>No Messages Yet</h2>\n    <p>Be the first to post in this room or invite someone to join the room</p>\n  </div>\n)\n\nexport const MessageList = ({ messages = {}, user, createConvo }) => (\n  <ul id=\"messages\" className={style.component}>\n    {Object.keys(messages).length > 0 ? (\n      <wrapper->\n        {Object.keys(messages)\n          .reverse()\n          .map(k => Message({ user, createConvo })(messages[k]))}\n      </wrapper->\n    ) : (\n      emptyList\n    )}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nconst dots = (\n  <div className={style.dots}>\n    {[0, 1, 2].map(x => (\n      <div key={x} />\n    ))}\n  </div>\n)\n\nexport const TypingIndicator = ({ typing = {} }) =>\n  Object.keys(typing).length ? (\n    <div className={style.component}>\n      <div>{dots}</div>\n      <div>{`${Object.keys(typing)\n        .slice(0, 2)\n        .join(' and ')} is typing`}</div>\n    </div>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const FileInput = ({ state: { user, message, room } }) =>\n  room.id ? (\n    <div className={style.container}>\n      <svg>\n        <use xlinkHref=\"index.svg#attach\" />\n      </svg>\n      <input\n        className={style.component}\n        type=\"file\"\n        onChange={e => {\n          const file = e.target.files[0]\n          file &&\n            user.sendMessage({\n              text: message || file.name,\n              roomId: room.id,\n              attachment: {\n                name: file.name.replace(/[^A-Za-z0-9._-]/g, '--'),\n                file,\n              },\n            })\n        }}\n      />\n    </div>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { FileInput } from '../FileInput'\n\nexport const CreateMessageForm = ({\n  state: { user = {}, room = {}, message = '' },\n  actions: { runCommand },\n}) =>\n  room.id ? (\n    <form\n      className={style.component}\n      onSubmit={e => {\n        e.preventDefault()\n\n        const message = e.target[0].value.trim()\n\n        if (message.length === 0) {\n          return\n        }\n\n        e.target[0].value = ''\n\n        message.startsWith('/')\n          ? runCommand(message.slice(1))\n          : user.sendMessage({\n              text: message,\n              roomId: room.id,\n            })\n      }}\n    >\n      <input\n        placeholder=\"Type a Message..\"\n        onInput={e => user.isTypingIn({ roomId: room.id })}\n      />\n      <FileInput state={{ user, room, message }} />\n      <button type=\"submit\">\n        <svg>\n          <use xlinkHref=\"index.svg#send\" />\n        </svg>\n      </button>\n    </form>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { dots } from '../TypingIndicator/index.module.css'\n\nconst Icon = id => (\n  <svg>\n    <use xlinkHref={`index.svg#${id}`} />\n  </svg>\n)\n\nconst unreads = (user, room, messages = {}) => {\n  const read = user.readCursor({ roomId: room.id })\n  return (\n    (read && Object.keys(messages).filter(x => x > read.position).length) ||\n    undefined\n  )\n}\n\nconst priority = (user, room, messages = {}) => {\n  const unreadMessages = unreads(user, room, messages) || 0\n  const lastMessage = Object.keys(messages).pop() || 0\n  return (10 * unreadMessages + parseInt(lastMessage)) * -1\n}\n\nexport const RoomList = ({\n  rooms = [],\n  user,\n  messages,\n  current,\n  typing,\n  actions,\n}) => (\n  <ul className={style.component}>\n    {rooms.map(room => {\n      const messageKeys = Object.keys(messages[room.id] || {})\n      const latestMessage =\n        messageKeys.length > 0 && messages[room.id][messageKeys.pop()]\n      const firstUser = room.users.find(x => x.id !== user.id)\n      const order = priority(user, room, messages[room.id])\n      const unreadCount = unreads(user, room, messages[room.id])\n      return (\n        <li\n          key={room.id}\n          disabled={room.id === current.id}\n          onClick={e => actions.joinRoom(room)}\n          style={{ order }}\n        >\n          {room.name.match(user.id) && firstUser ? (\n            <img src={firstUser.avatarURL} alt={firstUser.id} />\n          ) : (\n            Icon(room.isPrivate ? 'lock' : 'public')\n          )}\n          <col->\n            <p>{room.name.replace(user.id, '')}</p>\n            <span>{latestMessage && latestMessage.text}</span>\n          </col->\n          {room.id !== current.id && unreadCount ? (\n            <label>{unreadCount}</label>\n          ) : Object.keys(typing[room.id] || {}).length > 0 ? (\n            <div className={dots}>\n              {[0, 1, 2].map(x => (\n                <div key={x} />\n              ))}\n            </div>\n          ) : null}\n        </li>\n      )\n    })}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const RoomHeader = ({\n  state: { room, user, sidebarOpen, userListOpen },\n  actions: { setSidebar, setUserList },\n}) => (\n  <header className={style.component}>\n    <button onClick={e => setSidebar(!sidebarOpen)}>\n      <svg>\n        <use xlinkHref=\"index.svg#menu\" />\n      </svg>\n    </button>\n    <h1>{room.name && room.name.replace(user.id, '')}</h1>\n    {room.users && (\n      <div onClick={e => setUserList(!userListOpen)}>\n        <span>{room.users.length}</span>\n        <svg>\n          <use xlinkHref=\"index.svg#members\" />\n        </svg>\n      </div>\n    )}\n  </header>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const CreateRoomForm = ({ submit }) => (\n  <form\n    className={style.component}\n    onSubmit={e => {\n      e.preventDefault()\n      submit({\n        name: e.target[0].value,\n        private: e.target.elements[2].checked,\n      })\n      e.target[0].value = ''\n    }}\n  >\n    <input placeholder=\"Create a Room\" type=\"text\" required />\n    <button>\n      <input type=\"checkbox\" />\n      <svg>\n        <use xlinkHref=\"index.svg#lock\" />\n      </svg>\n    </button>\n    <button type=\"submit\">\n      <svg>\n        <use xlinkHref=\"index.svg#add\" />\n      </svg>\n    </button>\n  </form>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const WelcomeScreen = () => (\n  <section>\n    <div className={style.component}>\n      <span role=\"img\" aria-label=\"post\">\n        <svg viewBox=\"0 0 59 80\">\n          <g>\n            <path d=\"M48.417 49.444L38.585 73.229 36.012 71.394 41.802 56.726 31.211 59.519C31.211 59.519 26.022 42.42 26.513 30.837 26.218 22.744 27.644 16.96 30.167 13.6 34.274 8.408 42.099 3.953 49.793 7.645 54.701 9.869 57.658 13.889 58.107 17.824 59.479 34.859 38.498 41.817 38.498 41.817L38.085 38.191C38.085 38.191 44.945 35.464 49.105 29.553 53.266 23.643 51.245 15.88 46.569 14.464 42.061 13.577 37.34 18.757 36.516 27.966 34.721 41.776 39.393 52.006 39.393 52.006L48.417 49.444M0 62.396L15.402 74.372 16.522 71.783 8.26 65.71 16.853 63.305C16.853 63.305 10.998 47.535 10.597 32.251 10.229 27.354 9.896 11.684 15.924 8.975 16.976 7.213 18.743 5.903 18.743 5.903 18.743 5.903 3.467 4.584 4.184 32.453 5.706 51.166 9.451 59.821 9.451 59.821L0 62.396\" />\n            <path d=\"M29.91,61.761 L38.969,59.263 L30.045,80 L11.998,66.538 L19.098,64.644 C19.098,64.644 3.276,20.694 21.128,5.095 C32.325,-3.789 43.164,3.999 42.965,4.872 C40.203,4.812 37.842,5.844 37.842,5.844 C37.842,5.844 31.789,3.265 27.475,12.503 C23.719,20.705 22.048,34.474 29.91,61.761\" />\n            <path d=\"M41.806,17.606 C42.599,24.356 38.244,27.206 38.244,27.206 L37.819,30.659 C37.819,30.659 47.709,25.549 45.669,15.819 C44.566,15.913 42.212,17.242 41.806,17.606\" />\n          </g>\n        </svg>\n      </span>\n      <p>\n        Authenticating, subscribing to rooms\n        <br />\n        and fetching messages.\n      </p>\n    </div>\n  </section>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const JoinRoomScreen = () => (\n  <section>\n    <div className={style.component}>\n      <span role=\"img\" aria-label=\"post\">\n        <svg viewBox=\"0 0 59 80\">\n          <g>\n            <path d=\"M48.417 49.444L38.585 73.229 36.012 71.394 41.802 56.726 31.211 59.519C31.211 59.519 26.022 42.42 26.513 30.837 26.218 22.744 27.644 16.96 30.167 13.6 34.274 8.408 42.099 3.953 49.793 7.645 54.701 9.869 57.658 13.889 58.107 17.824 59.479 34.859 38.498 41.817 38.498 41.817L38.085 38.191C38.085 38.191 44.945 35.464 49.105 29.553 53.266 23.643 51.245 15.88 46.569 14.464 42.061 13.577 37.34 18.757 36.516 27.966 34.721 41.776 39.393 52.006 39.393 52.006L48.417 49.444M0 62.396L15.402 74.372 16.522 71.783 8.26 65.71 16.853 63.305C16.853 63.305 10.998 47.535 10.597 32.251 10.229 27.354 9.896 11.684 15.924 8.975 16.976 7.213 18.743 5.903 18.743 5.903 18.743 5.903 3.467 4.584 4.184 32.453 5.706 51.166 9.451 59.821 9.451 59.821L0 62.396\" />\n            <path d=\"M29.91,61.761 L38.969,59.263 L30.045,80 L11.998,66.538 L19.098,64.644 C19.098,64.644 3.276,20.694 21.128,5.095 C32.325,-3.789 43.164,3.999 42.965,4.872 C40.203,4.812 37.842,5.844 37.842,5.844 C37.842,5.844 31.789,3.265 27.475,12.503 C23.719,20.705 22.048,34.474 29.91,61.761\" />\n            <path d=\"M41.806,17.606 C42.599,24.356 38.244,27.206 38.244,27.206 L37.819,30.659 C37.819,30.659 47.709,25.549 45.669,15.819 C44.566,15.913 42.212,17.242 41.806,17.606\" />\n          </g>\n        </svg>\n      </span>\n      <p>\n        Join a room, create a room or click on a user avatar and start a\n        conversation.\n      </p>\n    </div>\n  </section>\n)\n","import Chatkit from '@pusher/chatkit-client'\n\nconst credentials = {\n  url: (id, token) =>\n    `https://chatkit-demo-server.herokuapp.com/token?user=${id}&token=${token}`,\n  instanceLocator: 'v1:us1:05f46048-3763-4482-9cfe-51ff327c3f29',\n}\n\nconst { instanceLocator, url } = credentials\nexport default ({ state, actions }, { id, token }) =>\n  new Chatkit.ChatManager({\n    tokenProvider: new Chatkit.TokenProvider({ url: url(id, token) }),\n    instanceLocator,\n    userId: id,\n  })\n    .connect({\n      onUserStartedTyping: actions.isTyping,\n      onUserStoppedTyping: actions.notTyping,\n      onAddedToRoom: actions.subscribeToRoom,\n      onRemovedFromRoom: actions.removeRoom,\n      onPresenceChanged: actions.setUserPresence,\n    })\n    .then(user => {\n      // Subscribe to all rooms the user is a member of\n      Promise.all(\n        user.rooms.map(room =>\n          user.subscribeToRoom({\n            roomId: room.id,\n            hooks: { onMessage: actions.addMessage },\n          })\n        )\n      ).then(rooms => {\n        actions.setUser(user)\n        // Join the first room in the users room list\n        user.rooms.length > 0 && actions.joinRoom(user.rooms[0])\n      })\n    })\n    .catch(error => console.log('Error on connection', error))\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { version } from '../package.json'\nimport './index.css'\n\nimport { UserHeader } from './components/UserHeader'\nimport { UserList } from './components/UserList'\nimport { MessageList } from './components/MessageList'\nimport { TypingIndicator } from './components/TypingIndicator'\nimport { CreateMessageForm } from './components/CreateMessageForm'\nimport { RoomList } from './components/RoomList'\nimport { RoomHeader } from './components/RoomHeader'\nimport { CreateRoomForm } from './components/CreateRoomForm'\nimport { WelcomeScreen } from './components/WelcomeScreen'\nimport { JoinRoomScreen } from './components/JoinRoomScreen'\n\nimport ChatManager from './chatkit'\n\n// --------------------------------------\n// Application\n// --------------------------------------\n\nclass View extends React.Component {\n  state = {\n    user: {},\n    room: {},\n    messages: {},\n    typing: {},\n    sidebarOpen: false,\n    userListOpen: window.innerWidth > 1000,\n  }\n\n  actions = {\n    // --------------------------------------\n    // UI\n    // --------------------------------------\n\n    setSidebar: sidebarOpen => this.setState({ sidebarOpen }),\n    setUserList: userListOpen => this.setState({ userListOpen }),\n\n    // --------------------------------------\n    // User\n    // --------------------------------------\n\n    setUser: user => this.setState({ user }),\n\n    // --------------------------------------\n    // Room\n    // --------------------------------------\n\n    setRoom: room => {\n      this.setState({ room, sidebarOpen: false })\n      this.actions.scrollToEnd()\n    },\n\n    removeRoom: room => this.setState({ room: {} }),\n\n    joinRoom: room => {\n      this.actions.setRoom(room)\n      this.actions.subscribeToRoom(room)\n      this.state.messages[room.id] &&\n        this.actions.setCursor(\n          room.id,\n          Object.keys(this.state.messages[room.id]).pop()\n        )\n    },\n\n    subscribeToRoom: room =>\n      !this.state.user.roomSubscriptions[room.id] &&\n      this.state.user.subscribeToRoom({\n        roomId: room.id,\n        hooks: { onMessage: this.actions.addMessage },\n      }),\n\n    createRoom: options =>\n      this.state.user.createRoom(options).then(this.actions.joinRoom),\n\n    createConvo: options => {\n      if (options.user.id !== this.state.user.id) {\n        const exists = this.state.user.rooms.find(\n          x =>\n            x.name === options.user.id + this.state.user.id ||\n            x.name === this.state.user.id + options.user.id\n        )\n        exists\n          ? this.actions.joinRoom(exists)\n          : this.actions.createRoom({\n              name: this.state.user.id + options.user.id,\n              addUserIds: [options.user.id],\n              private: true,\n            })\n      }\n    },\n\n    addUserToRoom: ({ userId, roomId = this.state.room.id }) =>\n      this.state.user\n        .addUserToRoom({ userId, roomId })\n        .then(this.actions.setRoom),\n\n    removeUserFromRoom: ({ userId, roomId = this.state.room.id }) =>\n      userId === this.state.user.id\n        ? this.state.user.leaveRoom({ roomId })\n        : this.state.user\n            .removeUserFromRoom({ userId, roomId })\n            .then(this.actions.setRoom),\n\n    // --------------------------------------\n    // Cursors\n    // --------------------------------------\n\n    setCursor: (roomId, position) =>\n      this.state.user\n        .setReadCursor({ roomId, position: parseInt(position) })\n        .then(x => this.forceUpdate()),\n\n    // --------------------------------------\n    // Messages\n    // --------------------------------------\n\n    addMessage: payload => {\n      const roomId = payload.room.id\n      const messageId = payload.id\n      // Update local message cache with new message\n      this.setState(prevState => ({\n        messages: {\n          ...prevState.messages,\n          [roomId]: {\n            ...prevState.messages[roomId],\n            [messageId]: payload\n          }\n        }\n      }))\n      // Update cursor if the message was read\n      if (roomId === this.state.room.id) {\n        const cursor = this.state.user.readCursor({ roomId }) || {}\n        const cursorPosition = cursor.position || 0\n        cursorPosition < messageId && this.actions.setCursor(roomId, messageId)\n        this.actions.scrollToEnd()\n      }\n      // Send notification\n      this.actions.showNotification(payload)\n    },\n\n    runCommand: command => {\n      const commands = {\n        invite: ([userId]) => this.actions.addUserToRoom({ userId }),\n        remove: ([userId]) => this.actions.removeUserFromRoom({ userId }),\n        leave: ([userId]) =>\n          this.actions.removeUserFromRoom({ userId: this.state.user.id }),\n      }\n      const name = command.split(' ')[0]\n      const args = command.split(' ').slice(1)\n      const exec = commands[name]\n      exec && exec(args).catch(console.log)\n    },\n\n    scrollToEnd: e =>\n      setTimeout(() => {\n        const elem = document.querySelector('#messages')\n        elem && (elem.scrollTop = 100000)\n      }, 0),\n\n    // --------------------------------------\n    // Typing Indicators\n    // --------------------------------------\n\n    isTyping: (room, user) =>\n      this.setState(prevState => ({\n        typing: {\n          ...prevState.typing,\n          [room.id]: {\n            ...prevState.typing[room.id],\n            [user.id]: true\n          }\n        }\n      })),\n\n    notTyping: (room, user) =>\n      this.setState(prevState => ({\n        typing: {\n          ...prevState.typing,\n          [room.id]: {\n            ...prevState.typing[room.id],\n            [user.id]: false\n          }\n        }\n      })),\n\n    // --------------------------------------\n    // Presence\n    // --------------------------------------\n\n    setUserPresence: () => this.forceUpdate(),\n\n    // --------------------------------------\n    // Notifications\n    // --------------------------------------\n\n    showNotification: message => {\n      if (\n        'Notification' in window &&\n        this.state.user.id &&\n        this.state.user.id !== message.senderId &&\n        document.visibilityState === 'hidden'\n      ) {\n        const notification = new Notification(\n          `New Message from ${message.sender.id}`,\n          {\n            body: message.text,\n            icon: message.sender.avatarURL,\n          }\n        )\n        notification.addEventListener('click', e => {\n          this.actions.joinRoom(message.room)\n          window.focus()\n        })\n      }\n    },\n  }\n\n  componentDidMount() {\n    'Notification' in window && Notification.requestPermission()\n    existingUser\n      ? ChatManager(this, JSON.parse(existingUser))\n      : fetch('https://chatkit-demo-server.herokuapp.com/auth', {\n          method: 'POST',\n          body: JSON.stringify({ code: authCode }),\n        })\n          .then(res => res.json())\n          .then(user => {\n            user.version = version\n            window.localStorage.setItem('chatkit-user', JSON.stringify(user))\n            window.history.replaceState(null, null, window.location.pathname)\n            ChatManager(this, user)\n          })\n  }\n\n  render() {\n    const {\n      user,\n      room,\n      messages,\n      typing,\n      sidebarOpen,\n      userListOpen,\n    } = this.state\n    const { createRoom, createConvo, removeUserFromRoom } = this.actions\n\n    return (\n      <main>\n        <aside data-open={sidebarOpen}>\n          <UserHeader user={user} />\n          <RoomList\n            user={user}\n            rooms={user.rooms}\n            messages={messages}\n            typing={typing}\n            current={room}\n            actions={this.actions}\n          />\n          {user.id && <CreateRoomForm submit={createRoom} />}\n        </aside>\n        <section>\n          <RoomHeader state={this.state} actions={this.actions} />\n          {room.id ? (\n            <row->\n              <col->\n                <MessageList\n                  user={user}\n                  messages={messages[room.id]}\n                  createConvo={createConvo}\n                />\n                <TypingIndicator typing={typing[room.id]} />\n                <CreateMessageForm state={this.state} actions={this.actions} />\n              </col->\n              {userListOpen && (\n                <UserList\n                  room={room}\n                  current={user.id}\n                  createConvo={createConvo}\n                  removeUser={removeUserFromRoom}\n                />\n              )}\n            </row->\n          ) : user.id ? (\n            <JoinRoomScreen />\n          ) : (\n            <WelcomeScreen />\n          )}\n        </section>\n      </main>\n    )\n  }\n}\n\n// --------------------------------------\n// Authentication\n// --------------------------------------\n\nwindow.localStorage.getItem('chatkit-user') &&\n  !window.localStorage.getItem('chatkit-user').match(version) &&\n  window.localStorage.clear()\n\nconst params = new URLSearchParams(window.location.search.slice(1))\nconst authCode = params.get('code')\nconst existingUser = window.localStorage.getItem('chatkit-user')\n\nconst githubAuthRedirect = () => {\n  const client = '20cdd317000f92af12fe'\n  const url = 'https://github.com/login/oauth/authorize'\n  const server = 'https://chatkit-demo-server.herokuapp.com'\n  const redirect = `${server}/success?url=${window.location.href.split('?')[0]}`\n  window.location = `${url}?scope=user:email&client_id=${client}&redirect_uri=${redirect}`\n}\n\n!existingUser && !authCode\n  ? githubAuthRedirect()\n  : ReactDOM.render(<View />, document.querySelector('#root'))\n"],"sourceRoot":""}